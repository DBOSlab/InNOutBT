<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="InNOutBT">
<title>2. Shell scripts for independent contrast regression analysis • InNOutBT</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="2. Shell scripts for independent contrast regression analysis">
<meta property="og:description" content="InNOutBT">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">InNOutBT</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/independent_contrast_regression_inputs.html">1. Creating input data for independent contrast regression analysis</a>
    <a class="dropdown-item" href="../articles/independent_contrast_regression_outputs.html">3. Processing output data from independent contrast regression analysis</a>
    <a class="dropdown-item" href="../articles/independent_contrast_regression_shell.html">2. Shell scripts for independent contrast regression analysis</a>
    <a class="dropdown-item" href="../articles/independent_contrast_regression_shell_project.html">Fully automated regression analysis and log processing with a shell script</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/DBOSlab/InNOutBT/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main"><div class="page-header">
      <img src="" class="logo" alt=""><h1>2. Shell scripts for independent contrast regression analysis</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/DBOSlab/InNOutBT/blob/HEAD/vignettes/articles/independent_contrast_regression_shell.Rmd" class="external-link"><code>vignettes/articles/independent_contrast_regression_shell.Rmd</code></a></small>
      <div class="d-none name"><code>independent_contrast_regression_shell.Rmd</code></div>
    </div>

    
    
<p><br>
The main goal of the <strong>InNOutBT</strong> package is to readily
create input data and process output data for Meade &amp; Pagel’s (2022)
<a href="http://www.evolution.reading.ac.uk/BayesTraitsV4.0.0/BayesTraitsV4.0.0.html" class="external-link">BayesTraits</a>
program.<br></p>
<p>Here in this article, we show how to use <strong>InNOutBT</strong>’s
function <code>BayesTraits.shell</code> for producing shell scripts and
associated run commands of BayesTraits phylogenetic independent contrast
regression analyses. Basically, the function
<code>BayesTraits.shell</code> uses the directory paths to the tree,
mean and linked data files as created with
<code>BayesTraits.inputs</code> (see article <a href="https://dboslab.github.io/InNOutBT/articles/independent_contrast_regression_inputs.html" class="external-link">here</a>),
to automatically produce shell scripts in both Unix and Windows
PowerShell formats. The resulting single shell script file can then be
used for running one or all-in-once multiple BayesTraits phylogenetic
regressions, without manually setting new analyses with new parameters.
The shell script produced with <code>BayesTraits.shell</code> should
have thus all parameters for all analyses with any defined model. In
addition to save the shell script directly in BayesTraits directory, the
function saves all the separate running files with BayesTraits specified
parameters (bi, it, sa, and st) for any run, depending on the chosen
model of tree transformation. See <a href="http://www.evolution.reading.ac.uk/BayesTraitsV4.0.0/Files/BayesTraitsV4.0.0-Manual.pdf" class="external-link">BayesTraits
V4.0.0 Manual</a> for further details on each of BayesTraits parameters
available for phylogenetic regression so as to better understand how to
set the arguments of <code>BayesTraits.shell</code>.<br><br></p>
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p><strong>InNOutBT</strong> is not on CRAN yet but you can install the
latest development version from <a href="https://github.com/" class="external-link">GitHub</a>:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="co">#install.packages("devtools")</span>
<span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://devtools.r-lib.org/reference/remote-reexports.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"DBOSlab/InNOutBT"</span><span class="op">)</span></code></pre></div>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://DBOSlab.github.io/InNOutBT">InNOutBT</a></span><span class="op">)</span></code></pre></div>
<p><br></p>
</div>
<div class="section level2">
<h2 id="creating-unix-shell-script">Creating Unix shell script<a class="anchor" aria-label="anchor" href="#creating-unix-shell-script"></a>
</h2>
<p>Set the argument <code>syst = "unix"</code> to create a shell script
for running the phylogenetic regressions with macOS Monterey.<br></p>
<p>Note that you should give the name of the response variable of your
analysis in the argument <code>responvar</code>. Also, you should use
the argument <code>treetransf</code> to define any or all (listed as a
vector) available tree transformation models that you want to run the
phylogenetic regressions with your input data. As such, choose among the
models <em>Kappa</em>, <em>Delta</em>, <em>Lambda</em>, <em>OU</em>
(Ornstein–Uhlenbeck), <em>UNI</em> (if you have set a complete default
BayesTraits regression analysis, i.e. assumed a uniform rates of
evolution no other tree transformation models were estimated),
<em>VR</em> (if you have used a variable rates) or <em>Fabric</em> (if
you want to use the general statistical mode that accommodates uneven
evolutionary landscape as described by <a href="https://doi.org/10.1038/s41467-022-28595-z" class="external-link">Pagel et al.,
2022</a>).<br></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://DBOSlab.github.io/InNOutBT">InNOutBT</a></span><span class="op">)</span>

<span class="fu"><a href="../reference/BayesTraits.shell.html">BayesTraits.shell</a></span><span class="op">(</span>meanfile_dir <span class="op">=</span> <span class="st">"results_BayesTraits_input/09Jun2022"</span>,
                  linkfile_dir <span class="op">=</span> <span class="st">"results_BayesTraits_input/09Jun2022"</span>,
                  treefile_dir <span class="op">=</span> <span class="st">"Data"</span>,
                  BayesTraits_dir <span class="op">=</span> <span class="st">"/Users/domingoscardoso/BayesTraitsV4"</span>,
                  responvar <span class="op">=</span> <span class="st">"DBH"</span>,
                  treetransf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"UNI"</span>, <span class="st">"Lambda"</span>, <span class="st">"VR"</span>, <span class="st">"Fabric"</span><span class="op">)</span>,
                  Kappa <span class="op">=</span> <span class="cn">NULL</span>,
                  Delta <span class="op">=</span> <span class="cn">NULL</span>,
                  Lambda <span class="op">=</span> <span class="cn">NULL</span>,
                  OU <span class="op">=</span> <span class="cn">NULL</span>,
                  VRLambda <span class="op">=</span> <span class="cn">FALSE</span>,
                  bi <span class="op">=</span> <span class="st">"30000000"</span>,
                  it <span class="op">=</span> <span class="st">"130000000"</span>,
                  sa <span class="op">=</span> <span class="st">"100000"</span>,
                  st <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"500"</span>, <span class="st">"50000"</span><span class="op">)</span>,
                  syst <span class="op">=</span> <span class="st">"unix"</span>,
                  dir_create <span class="op">=</span> <span class="st">"results_BayesTraits_shell"</span>,
                  cc_DataTree <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="figures/shell_unix.png" width="620"><br><br></p>
</div>
<div class="section level2">
<h2 id="creating-windows-powershell-script">Creating Windows PowerShell script<a class="anchor" aria-label="anchor" href="#creating-windows-powershell-script"></a>
</h2>
<p>Set the argument <code>syst = "windows"</code> to create a PowerShell
script for running the phylogenetic regressions with Windows.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/BayesTraits.shell.html">BayesTraits.shell</a></span><span class="op">(</span>meanfile_dir <span class="op">=</span> <span class="st">"results_BayesTraits_input/09Jun2022"</span>,
                  linkfile_dir <span class="op">=</span> <span class="st">"results_BayesTraits_input/09Jun2022"</span>,
                  treefile_dir <span class="op">=</span> <span class="st">"Data"</span>,
                  BayesTraits_dir <span class="op">=</span> <span class="st">"/Users/domingoscardoso/BayesTraitsV4"</span>,
                  responvar <span class="op">=</span> <span class="st">"DBH"</span>,
                  treetransf <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"UNI"</span>, <span class="st">"Lambda"</span>, <span class="st">"VR"</span>, <span class="st">"Fabric"</span><span class="op">)</span>,
                  Kappa <span class="op">=</span> <span class="cn">NULL</span>,
                  Delta <span class="op">=</span> <span class="cn">NULL</span>,
                  Lambda <span class="op">=</span> <span class="cn">NULL</span>,
                  OU <span class="op">=</span> <span class="cn">NULL</span>,
                  VRLambda <span class="op">=</span> <span class="cn">FALSE</span>,
                  bi <span class="op">=</span> <span class="st">"30000000"</span>,
                  it <span class="op">=</span> <span class="st">"130000000"</span>,
                  sa <span class="op">=</span> <span class="st">"100000"</span>,
                  st <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"500"</span>, <span class="st">"50000"</span><span class="op">)</span>,
                  syst <span class="op">=</span> <span class="st">"windows"</span>,
                  dir_create <span class="op">=</span> <span class="st">"results_BayesTraits_shell"</span>,
                  cc_DataTree <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
<p><img src="figures/shell_windows.png" width="705"></p>
<p><br><br>
The function generates all running BayesTraits commands for the multiple
regressions, depending on the parameters set in the arguments
<code>treetransf</code>, <code>bi</code>, <code>it</code>,
<code>sa</code>, and <code>st</code>.<br><br><img src="figures/shell_bayestraits_running_commands.png" width="453"></p>
<p><br><br>
Note that because we have set the argument
<code>cc_DataTree = TRUE</code>, then the tree, mean data, and linked
data files were also copied directly into the BayesTraits folder.<br><br><img src="figures/bayestraits_folder.png" width="510"></p>
<p><br><br>
Note that if you set any of the arguments <code>Kappa</code>,
<code>Delta</code>, <code>Lambda</code>, and <code>OU</code> as the
default <em>NULL</em>, these tree transformation models will be
estimated, provided that any of them were also listed in the argument
<code>treetransf</code>. But you can also set them as a vector with any
specific value between 0 and 1. For example, if you want to run analyses
with both specific and estimated values for <code>Lambda</code>, then
you have to set a vector such as <em>c(“0.001”, “1.0”,
“Estimate”)</em>.<br><br>
Also, if you define the logical argument <code>VRLambda</code> as
<em>TRUE</em>, then the specific values set for the tree transformation
models at the parameters <code>Kappa</code>, <code>Delta</code>,
<code>Lambda</code> or <code>OU</code> will be considered as separate
runs when using the model of variable rates <em>VR</em>, provided that
you have also chosen this model in the parameter
<code>treetransf</code>.<br><br></p>
</div>
<div class="section level2">
<h2 id="running-the-unix-shell-script">Running the Unix shell script<a class="anchor" aria-label="anchor" href="#running-the-unix-shell-script"></a>
</h2>
<p>After using the function <code>BayesTraits.shell</code> with all the
needed parameters, you have to set permission to the shell script to run
automatically all the phylogenetic regression analyses with BayesTraits
program. You can just follow the steps below.<br></p>
<p><strong>1.</strong> Open the terminal;<br></p>
<p><strong>2.</strong> Go to the BayesTraits program folder where you
have saved the shell script file <strong>.sh</strong> and the associated
running and input data files with the function
<code>BayesTraits.shell</code>. The shell script should be named
<strong>run_BayesTraits_shell_unix.sh</strong>;<br></p>
<p><strong>3.</strong> Execute the following line:<br><strong>chmod 777 run_BayesTraits_shell_unix.sh</strong></p>
<p><strong>4.</strong> Then perform the BayesTraits run using the shell
script by executing the following line:<br><strong>./run_BayesTraits_shell_unix.sh</strong><br><br></p>
</div>
<div class="section level2">
<h2 id="running-the-windows-powershell-script">Running the Windows PowerShell script<a class="anchor" aria-label="anchor" href="#running-the-windows-powershell-script"></a>
</h2>
<p>After using the function <code>BayesTraits.shell</code> with all the
needed parameters, you have to set permission to the PowerShell script
to run automatically all the phylogenetic regression analyses with
BayesTraits program. You can just follow the steps below, but you may
also want to find <a href="https://docs.microsoft.com/en-us/powershell/module/microsoft.powershell.security/set-executionpolicy?view=powershell-7.2" class="external-link">further
information on how to use Windows PowerShell</a>.</p>
<p><strong>1.</strong> Open PowerShell as Administrator;<br></p>
<p><strong>2.</strong> Go to the BayesTraits program folder where you
have saved the PowerShell script file <strong>.ps1</strong> and the
associated running and input data files with the function
<code>BayesTraits.shell</code>. The PowerShell script should be named
<strong>run_BayesTraits_shell_windows.ps1</strong>;<br></p>
<p><strong>3.</strong> Execute the following line and choose option
<strong>[Y]Yes</strong>;<br><strong>Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope
LocalMachine</strong></p>
<p><strong>4.</strong> Execute the following line:<br><strong>Unblock-File -Path
.\run_BayesTraits_shell_windows.ps1</strong></p>
<p><strong>5.</strong> Then perform the BayesTraits run using the
PowerShell script by executing the following line:<br><strong>.\run_BayesTraits_shell_windows.ps1</strong></p>
<p><br><br>
See also an associated article on how to automatically <a href="https://dboslab.github.io/InNOutBT/articles/independent_contrast_regression_inputs.html" class="external-link">create
input files</a> with <code>BayesTraits.inputs</code> for the
phylogenetic regression analyses, as well as another article on how to
use <code>BayesTraits.outputs</code> to <a href="https://dboslab.github.io/InNOutBT/articles/independent_contrast_regression_outputs.html" class="external-link">process
the resulting output files</a> from the analyses.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Domingos Cardoso, Matt Lavin.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
